window.Allpass=(()=>{const e="https://verification.allpass.ai",t="1.0.12",n="allpass";let o,s={};const a=`${n}Session_`,i=e=>a+e,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!(e=>e&&/^[a-zA-Z0-9-_]+?\.[a-zA-Z0-9-_]+?(\.[a-zA-Z0-9-_]+?)?$/.test(e))(e))return null;const n=JSON.parse(atob(e.split(".")[1]));return t&&Date.now()>=1e3*n.exp?null:n},l=e=>{const t=sessionStorage.getItem(e);if(t){const n=r(t,!0);if(n)return{accessToken:t,data:n};sessionStorage.removeItem(e)}return null},d=a=>{const i=document.getElementById(n);if(!i)throw new Error(`Element with id "${n}" not found`);i.innerHTML="";const r=document.createElement("meta");r.name="viewport",r.content="width=device-width, initial-scale=1",document.getElementsByTagName("head")[0].appendChild(r),i.style.minHeight="min-content",i.style.position="relative",i.style.overflow="hidden",i.style.paddingTop=`${Math.max(document.documentElement.clientHeight,650)}px`,i.style.display="none";const l=document.createElement("iframe");l.src=`${e}/${a}?sdkVersion=${t}&isFrame=1&${o?`locale=${o}`:""}`,l.allow="camera *",l.onload=s.onLoad,l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.border="0",i.appendChild(l)},c=e=>{const{height:t}=e||document.documentElement.clientHeight;document.getElementById(n).style.paddingTop=t};return window.addEventListener("message",(t=>{if(t.origin===e&&t.data&&t.data.type&&s[t.data.type]){switch(t.data.type){case"onComplete":case"onError":t.data.appKey&&sessionStorage.removeItem(i(t.data.appKey))}s[t.data.type](t.data)}})),()=>({init:function(e,t){let{onLoad:n,onRestart:a,onStart:i,onPassStep:r,onComplete:l,onError:d}=e;return o=t,s={onLoad:n,onRestart:a,onStart:i,onPassStep:r,onComplete:l,onError:d,onChangeIframe:c},this},start:async e=>{const t=r(e);if(!t)throw new Error("Authentication failed");sessionStorage.setItem(i(t.appKey),e),d(e)},restart:()=>{for(const e in sessionStorage){if(0!==e.indexOf(a))continue;const t=l(e);if(t){const{accessToken:e,data:n}=t;return s.onRestart(n),d(e)}}},clearSessions:()=>{for(const e in sessionStorage)0===e.indexOf(a)&&sessionStorage.removeItem(e)},getVersion:()=>t,close:()=>{const e=document.getElementById(n);e&&(e.innerHTML="")}})})()();