window.Allpass=(()=>{const e="https://verification.allpass.ai",t="1.0.12",n="allpass";let o={};const s=`${n}Session_`,a=e=>s+e,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!(e=>e&&/^[a-zA-Z0-9-_]+?\.[a-zA-Z0-9-_]+?(\.[a-zA-Z0-9-_]+?)?$/.test(e))(e))return null;const n=JSON.parse(atob(e.split(".")[1]));return t&&Date.now()>=1e3*n.exp?null:n},r=e=>{const t=sessionStorage.getItem(e);if(t){const n=i(t,!0);if(n)return{accessToken:t,data:n};sessionStorage.removeItem(e)}return null},l=(s,a)=>{const{lang:i}=a,r=document.getElementById(n);if(!r)throw new Error(`Element with id "${n}" not found`);r.innerHTML="";const l=document.createElement("meta");l.name="viewport",l.content="width=device-width, initial-scale=1",document.getElementsByTagName("head")[0].appendChild(l),r.style.minHeight="min-content",r.style.position="relative",r.style.overflow="hidden",r.style.paddingTop=`${Math.max(document.documentElement.clientHeight,650)}px`,r.style.display="none";const d=document.createElement("iframe");d.src=`${e}/${s}?sdkVersion=${t}&isFrame=1&${i?`lang=${i}`:""}`,d.allow="camera *",d.onload=o.onLoad,d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="100%",d.style.height="100%",d.style.border="0",r.appendChild(d)},d=e=>{const{height:t}=e||document.documentElement.clientHeight;document.getElementById(n).style.paddingTop=t};return window.addEventListener("message",(t=>{if(t.origin===e&&t.data&&t.data.type&&o[t.data.type]){switch(t.data.type){case"onComplete":case"onError":t.data.appKey&&sessionStorage.removeItem(a(t.data.appKey))}o[t.data.type](t.data)}})),()=>({init:function(e){let{onLoad:t,onRestart:n,onStart:s,onPassStep:a,onComplete:i,onError:r}=e;return o={onLoad:t,onRestart:n,onStart:s,onPassStep:a,onComplete:i,onError:r,onChangeIframe:d},this},start:async e=>{const t=i(e);if(!t)throw new Error("Authentication failed");sessionStorage.setItem(a(t.appKey),e),l(e,t)},restart:()=>{for(const e in sessionStorage){if(0!==e.indexOf(s))continue;const t=r(e);if(t){const{accessToken:e,data:n}=t;return o.onRestart(n),l(e,n)}}},clearSessions:()=>{for(const e in sessionStorage)0===e.indexOf(s)&&sessionStorage.removeItem(e)},getVersion:()=>t,close:()=>{const e=document.getElementById(n);e&&(e.innerHTML="")}})})()();